!function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){function r(e,t,n){var r=n.positions.map(function(e){var n=t.project(e);return n[1]=v.shape[1]-n[1],n}),i=Math.floor(n.cells.length/2);e.lineCap="round",e.lineJoin="round",e.lineWidth=1.5,e.beginPath(),e.strokeStyle=a[0],o(e,r,n.cells,0,i),e.stroke(),e.beginPath(),e.strokeStyle=a[1],o(e,r,n.cells,i),e.stroke()}function i(){c.addEventListener("touchstart",function(e){e.preventDefault()})}var o=e("draw-triangles-2d"),s=e("canvas-loop"),a=["hsl(80, 50%, 50%)","hsl(180, 50%, 50%)"],c=document.querySelector(".canvas"),u=e("2d-context")({alpha:!1,canvas:c}),l=e("icosphere")(1),f=e("perspective-camera")({fov:50*Math.PI/180,position:[0,0,1],near:1e-5,far:100}),p=e("../")({element:c,distanceBounds:[2,100],distance:6});i();var v=s(c,{scale:window.devicePixelRatio}).start();v.on("tick",function(){var e=v.shape[0],t=v.shape[1];p.update(f.position,f.direction,f.up);var n=[0,0,e,t];f.viewport=n,f.update(),u.save(),u.scale(v.scale,v.scale),u.fillStyle="#1B1B23",u.fillRect(0,0,e,t),r(u,f,l),u.restore()})},{"../":2,"2d-context":4,"canvas-loop":8,"draw-triangles-2d":18,icosphere:34,"perspective-camera":40}],2:[function(e,t,n){function r(e){function t(e,t){var n=2*Math.PI;h[0]-=n*e*w.rotateSpeed,h[1]-=n*t*w.rotateSpeed}function n(e){h[2]+=e*w.zoomSpeed}function r(e){h[2]-=e*w.pinchSpeed}function v(e,t,n){var r=n||f;c(g,r,f),u(m,g);var o=w.distance;l.subtract(d,e,w.target),l.transformQuat(d,d,g);var a=Math.atan2(d[0],d[2]),v=Math.atan2(Math.sqrt(d[0]*d[0]+d[2]*d[2]),d[1]);a+=h[0],v+=h[1],a=s(a,w.thetaBounds[0],w.thetaBounds[1]),v=s(v,w.phiBounds[0],w.phiBounds[1]),v=s(v,p,Math.PI-p),o+=h[2],o=s(o,w.distanceBounds[0],w.distanceBounds[1]);var y=Math.abs(o)<=p?p:o;d[0]=y*Math.sin(v)*Math.sin(a),d[1]=y*Math.cos(v),d[2]=y*Math.sin(v)*Math.cos(a),w.phi=v,w.theta=a,w.distance=o,l.transformQuat(d,d,m),l.add(e,w.target,d),i(t,r,e,w.target);for(var x="number"==typeof w.damping?w.damping:1,b=0;b<h.length;b++)h[b]*=1-x}e=e||{};var h=[0,0,0],d=[0,0,0],g=[0,0,0,1],m=g.slice(),w={update:v,target:e.target||[0,0,0],phi:e.phi||0,theta:e.theta||0,distance:o(e.distance,1),damping:o(e.damping,.25),rotateSpeed:o(e.rotateSpeed,.5),zoomSpeed:o(e.zoomSpeed,.01),pinchSpeed:o(e.pinchSpeed,.01),pinch:e.pinching!==!1,zoom:e.zoom!==!1,rotate:e.rotate!==!1,phiBounds:e.phiBounds||[0,Math.PI],thetaBounds:e.thetaBounds||[-(1/0),1/0],distanceBounds:e.distanceBounds||[1,1/0]};return a({parent:e.parent||window,element:e.element,rotate:e.rotate!==!1?t:null,zoom:e.zoom!==!1?n:null,pinch:e.pinch!==!1?r:null}),w}function i(e,t,n,r){l.copy(e,r),l.subtract(e,e,n),l.normalize(e,e)}var o=e("defined"),s=e("clamp"),a=e("./lib/input"),c=e("quat-from-unit-vec3"),u=e("gl-quat/invert"),l={length:e("gl-vec3/length"),add:e("gl-vec3/add"),subtract:e("gl-vec3/subtract"),transformQuat:e("gl-vec3/transformQuat"),copy:e("gl-vec3/copy"),normalize:e("gl-vec3/normalize"),cross:e("gl-vec3/cross")},f=[0,1,0],p=1e-10;t.exports=r},{"./lib/input":3,clamp:16,defined:17,"gl-quat/invert":19,"gl-vec3/add":22,"gl-vec3/copy":23,"gl-vec3/cross":24,"gl-vec3/length":26,"gl-vec3/normalize":27,"gl-vec3/subtract":32,"gl-vec3/transformQuat":33,"quat-from-unit-vec3":60}],3:[function(e,t,n){function r(e){function t(e){e.preventDefault()}function n(){d.addEventListener("touchmove",function(e){if(m&&!r())for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],i=v.indexOfTouch(n),o=_?-1!==i:0===i;if(o){l(n);break}}}),v.on("place",function(e,t){if(m=!r()){var n=t||e;c(n)}}),v.on("lift",function(e,t){m=!r(),m&&t&&o(t,h,g)})}function r(){return v.pinching&&_}function a(){v.on("change",function(e,t){_(e-t)})}function c(e){o(e,h,g),f(g)&&(m=!0)}function u(){m=!1}function l(e){var t=o(e,h,w);if(v&&r())return void(g=t);if(m){var n=p(y),i=(t[0]-g[0])/n[0],s=(t[1]-g[1])/n[1];b(i,s),g[0]=t[0],g[1]=t[1]}}function f(e){if(h===window||h===document||h===document.body)return!0;var t=h.getBoundingClientRect();return e[0]>=0&&e[1]>=0&&e[0]<t.width&&e[1]<t.height}function p(e){var t=h;return(t===window||t===document||t===document.body)&&(t=document.documentElement),e[0]=t.clientWidth,e[1]=t.clientHeight,e}var v,h=e.element||window,d=e.parent||h,g=[0,0],m=!1,w=[0,0],y=[0,0],x=e.zoom,b=e.rotate,_=e.pinch;x&&i(h,function(e,t){x(t)},!0),b&&(d.addEventListener("mousedown",c),d.addEventListener("mousemove",l),d.addEventListener("mouseup",u)),(b||_)&&(v=s(d,h),d.addEventListener("touchstart",t),b&&n(),_&&a())}var i=e("mouse-wheel"),o=e("mouse-event-offset"),s=e("touch-pinch");t.exports=r},{"mouse-event-offset":36,"mouse-wheel":39,"touch-pinch":61}],4:[function(e,t,n){var r=e("get-canvas-context");t.exports=function(e){return r("2d",e)}},{"get-canvas-context":5}],5:[function(e,t,n){function r(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if("undefined"==typeof document)return null;t=t||{};var n=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(n.width=t.width),"number"==typeof t.height&&(n.height=t.height);var r,i=t;try{var o=[e];0===e.indexOf("webgl")&&o.push("experimental-"+e);for(var s=0;s<o.length;s++)if(r=n.getContext(o[s],i))return r}catch(a){r=null}return r||null}t.exports=r},{}],6:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),c=1;r>c;c++)o[c-1]=arguments[c];n.apply(this,o)}else if(s(n)){for(r=arguments.length,o=new Array(r-1),c=1;r>c;c++)o[c-1]=arguments[c];for(u=n.slice(),r=u.length,c=0;r>c;c++)u[c].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var n;n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=o;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],7:[function(e,t,n){function r(){l=!1,a.length?u=a.concat(u):f=-1,u.length&&i()}function i(){if(!l){var e=setTimeout(r);l=!0;for(var t=u.length;t;){for(a=u,u=[];++f<t;)a&&a[f].run();f=-1,t=u.length}a=null,l=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var a,c=t.exports={},u=[],l=!1,f=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new o(e,t)),1!==u.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=s,c.addListener=s,c.once=s,c.off=s,c.removeListener=s,c.removeAllListeners=s,c.emit=s,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],8:[function(e,t,n){function r(){var e=document.documentElement;return[e.clientWidth,e.clientHeight]}var i=e("canvas-fit"),o=e("raf-loop");t.exports=function(e,t){function n(){a();var t=e.width,n=e.height;u[0]=t/a.scale,u[1]=n/a.scale}if(!e)throw new TypeError("must specify a canvas element");t=t||{};var s=t.parent||r,a=i(e,s,t.scale),c=o(),u=[0,0];return n(),window.addEventListener("resize",function(){n(),c.emit("resize")},!1),Object.defineProperties(c,{scale:{get:function(){return a.scale},set:function(e){a.scale=e}},shape:{get:function(){return u}},parent:{get:function(){return a.parent},set:function(e){a.parent=e}}}),c}},{"canvas-fit":9,"raf-loop":11}],9:[function(e,t,n){function r(e,t,n){function r(){var t=r.parent||e.parentNode;if("function"==typeof t)var n=t(o)||o,a=n[0],c=n[1];else if(t&&t!==document.body)var u=i(t),a=0|u[0],c=0|u[1];else var a=window.innerWidth,c=window.innerHeight;return s?(e.setAttribute("width",a*r.scale+"px"),e.setAttribute("height",c*r.scale+"px")):(e.width=a*r.scale,e.height=c*r.scale),e.style.width=a+"px",e.style.height=c+"px",r}var s="SVG"===e.nodeName.toUpperCase();return e.style.position=e.style.position||"absolute",e.style.top=0,e.style.left=0,r.scale=parseFloat(n||1),r.parent=t,r()}var i=e("element-size");t.exports=r;var o=new Float32Array(2)},{"element-size":10}],10:[function(e,t,n){function r(e){if(e===window||e===document.body)return[window.innerWidth,window.innerHeight];if(!e.parentNode){var t=!0;document.body.appendChild(e)}var n=e.getBoundingClientRect(),r=getComputedStyle(e),o=(0|n.height)+i(r.getPropertyValue("margin-top"))+i(r.getPropertyValue("margin-bottom")),s=(0|n.width)+i(r.getPropertyValue("margin-left"))+i(r.getPropertyValue("margin-right"));return t&&document.body.removeChild(e),[s,o]}function i(e){return parseFloat(e)||0}t.exports=r},{}],11:[function(e,t,n){function r(e){return this instanceof r?(this.running=!1,this.last=s(),this._frame=0,this._tick=this.tick.bind(this),void(e&&this.on("tick",e))):new r(e)}var i=e("inherits"),o=e("events").EventEmitter,s=e("right-now"),a=e("raf");t.exports=r,i(r,o),r.prototype.start=function(){return this.running?void 0:(this.running=!0,this.last=s(),this._frame=a(this._tick),this)},r.prototype.stop=function(){return this.running=!1,0!==this._frame&&a.cancel(this._frame),this._frame=0,this},r.prototype.tick=function(){this._frame=a(this._tick);var e=s(),t=e-this.last;this.emit("tick",t),this.last=e}},{events:6,inherits:12,raf:13,"right-now":15}],12:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],13:[function(e,t,n){for(var r=e("performance-now"),i="undefined"==typeof window?{}:window,o=["moz","webkit"],s="AnimationFrame",a=i["request"+s],c=i["cancel"+s]||i["cancelRequest"+s],u=0;u<o.length&&!a;u++)a=i[o[u]+"Request"+s],c=i[o[u]+"Cancel"+s]||i[o[u]+"CancelRequest"+s];if(!a||!c){var l=0,f=0,p=[],v=1e3/60;a=function(e){if(0===p.length){var t=r(),n=Math.max(0,v-(t-l));l=n+t,setTimeout(function(){var e=p.slice(0);p.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return p.push({handle:++f,callback:e,cancelled:!1}),f},c=function(e){for(var t=0;t<p.length;t++)p[t].handle===e&&(p[t].cancelled=!0)}}t.exports=function(e){return a.call(i,e)},t.exports.cancel=function(){c.apply(i,arguments)}},{"performance-now":14}],14:[function(e,t,n){(function(e){(function(){var n,r,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-i)/1e6},r=e.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},i=n()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:7}],15:[function(e,t,n){(function(e){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,n){function r(e,t,n){return n>t?t>e?t:e>n?n:e:n>e?n:e>t?t:e}t.exports=r},{}],17:[function(e,t,n){t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],18:[function(e,t,n){t.exports=function(e,t,n,r,i){var o=t;for(r=0|r,i="number"==typeof i?0|i:n.length;i>r&&r<n.length;r++){var s=n[r],a=o[s[0]],c=o[s[1]],u=o[s[2]];e.moveTo(a[0],a[1]),e.lineTo(c[0],c[1]),e.lineTo(u[0],u[1]),e.lineTo(a[0],a[1])}}},{}],19:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;return e[0]=-n*a,e[1]=-r*a,e[2]=-i*a,e[3]=o*a,e}t.exports=r},{}],20:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s),e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=o*s),e}t.exports=r},{}],21:[function(e,t,n){t.exports=e("gl-vec4/normalize")},{"gl-vec4/normalize":20}],22:[function(e,t,n){function r(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}t.exports=r},{}],23:[function(e,t,n){function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}t.exports=r},{}],24:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],c=n[2];return e[0]=i*c-o*a,e[1]=o*s-r*c,e[2]=r*a-i*s,e}t.exports=r},{}],25:[function(e,t,n){function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=r},{}],26:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}t.exports=r},{}],27:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}t.exports=r},{}],28:[function(e,t,n){function r(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}t.exports=r},{}],29:[function(e,t,n){function r(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}t.exports=r},{}],30:[function(e,t,n){function r(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}t.exports=r},{}],31:[function(e,t,n){function r(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}t.exports=r},{}],32:[function(e,t,n){function r(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}t.exports=r},{}],33:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],c=n[2],u=n[3],l=u*r+a*o-c*i,f=u*i+c*r-s*o,p=u*o+s*i-a*r,v=-s*r-a*i-c*o;return e[0]=l*u+v*-s+f*-c-p*-a,e[1]=f*u+v*-a+p*-s-l*-c,e[2]=p*u+v*-c+l*-a-f*-s,e}t.exports=r},{}],34:[function(e,t,n){function r(e){e=0|+e;var t=[],n=[],r=.5+Math.sqrt(5)/2;t.push([-1,+r,0]),t.push([1,+r,0]),t.push([-1,-r,0]),t.push([1,-r,0]),t.push([0,-1,+r]),t.push([0,1,+r]),t.push([0,-1,-r]),t.push([0,1,-r]),t.push([+r,0,-1]),t.push([+r,0,1]),t.push([-r,0,-1]),t.push([-r,0,1]),n.push([0,11,5]),n.push([0,5,1]),n.push([0,1,7]),n.push([0,7,10]),n.push([0,10,11]),n.push([1,5,9]),n.push([5,11,4]),n.push([11,10,2]),n.push([10,7,6]),n.push([7,1,8]),n.push([3,9,4]),n.push([3,4,2]),n.push([3,2,6]),n.push([3,6,8]),n.push([3,8,9]),n.push([4,9,5]),n.push([2,4,11]),n.push([6,2,10]),n.push([8,6,7]),n.push([9,8,1]);for(var s={cells:n,positions:t};e-->0;)s=i(s);t=s.positions;for(var a=0;a<t.length;a++)o(t[a]);return s}function i(e){function t(e,t){var i=r(e,t),o=n(i),s=c[o];return s?s:c[o]=i}function n(e){return e[0].toPrecision(6)+","+e[1].toPrecision(6)+","+e[2].toPrecision(6)}function r(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}for(var i=e.positions,o=e.cells,s=[],a=[],c={},u=0,l=0;l<o.length;l++){var f=o[l],p=f[0],v=f[1],h=f[2],d=i[p],g=i[v],m=i[h],w=t(d,g),y=t(g,m),x=t(m,d),b=a.indexOf(w);-1===b&&(b=u++,a.push(w));var _=a.indexOf(y);-1===_&&(_=u++,a.push(y));var L=a.indexOf(x);-1===L&&(L=u++,a.push(x));var M=a.indexOf(d);-1===M&&(M=u++,a.push(d));var E=a.indexOf(g);-1===E&&(E=u++,a.push(g));var j=a.indexOf(m);-1===j&&(j=u++,a.push(m)),s.push([M,b,L]),s.push([E,_,b]),s.push([j,L,_]),s.push([b,_,L])}return{cells:s,positions:a}}var o=e("vectors/normalize-nd");t.exports=r},{"vectors/normalize-nd":35}],35:[function(e,t,n){function r(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]*e[n];if(t=Math.sqrt(t),0===t)return Array.apply(null,new Array(e.length)).map(Number.prototype.valueOf,0);for(var n=0;n<e.length;n++)e[n]/=t;return e}t.exports=r},{}],36:[function(e,t,n){function r(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,o=e.clientY||0,s=i(t);return n[0]=r-s.left,n[1]=o-s.top,n}function i(e){return e===window||e===document||e===document.body?o:e.getBoundingClientRect()}var o={left:0,top:0};t.exports=r},{}],37:[function(e,t,n){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],38:[function(e,t,n){"use strict";function r(e,t){var n=s(getComputedStyle(e).getPropertyValue(t));return n[0]*o(n[1],e)}function i(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var i=r(n,"font-size")/128;return t.removeChild(n),i}function o(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),(t===window||t===document)&&(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return i(e,t);case"em":return r(t,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}var s=e("parse-unit");t.exports=o;var a=96},{"parse-unit":37}],39:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var r=i("ex",e);e.addEventListener("wheel",function(e){n&&e.preventDefault();var i=e.deltaX||0,o=e.deltaY||0,s=e.deltaZ||0,a=e.deltaMode,c=1;switch(a){case 1:c=r;break;case 2:c=window.innerHeight}return i*=c,o*=c,s*=c,i||o||s?t(i,o,s):void 0})}var i=e("to-px");t.exports=r},{"to-px":38}],40:[function(e,t,n){t.exports=e("./lib/camera-perspective")},{"./lib/camera-perspective":43}],41:[function(e,t,n){var r=e("object-assign"),i=e("ray-3d"),o=e("camera-project"),s=e("camera-unproject"),a=e("./camera-look-at"),c=e("camera-picking-ray"),u=e("gl-vec3/add"),l=e("gl-mat4/multiply"),f=e("gl-mat4/invert"),p=e("gl-mat4/identity"),v=e("gl-vec3/set");t.exports=function(e){function t(){l(y.projView,y.projection,y.view);var e=f(y.invProjView,y.projView);if(!e)throw new Error("camera projection * view is non-invertible")}function n(e){return a(y.direction,y.up,y.position,e),y}function h(){return v(y.position,0,0,0),v(y.direction,0,0,-1),v(y.up,0,1,0),p(y.view),p(y.projection),p(y.projView),p(y.invProjView),y}function d(e){return u(y.position,y.position,e),y}function g(e){var t=new i;return c(t.origin,t.direction,e,y.viewport,y.invProjView),t}function m(e){return o([],e,y.viewport,y.projView)}function w(e){return s([],e,y.viewport,y.invProjView)}e=e||{};var y={projection:p([]),view:p([]),position:e.position||[0,0,0],direction:e.direction||[0,0,-1],up:e.up||[0,1,0],viewport:e.viewport||[-1,-1,1,1],projView:p([]),invProjView:p([])};return r(y,{translate:d,identity:h,lookAt:n,createPickingRay:g,update:t,project:m,unproject:w})}},{"./camera-look-at":42,"camera-picking-ray":44,"camera-project":45,"camera-unproject":48,"gl-mat4/identity":50,"gl-mat4/invert":51,"gl-mat4/multiply":53,"gl-vec3/add":22,"gl-vec3/set":30,"object-assign":55,"ray-3d":56}],42:[function(e,t,n){var r=e("gl-vec3/cross"),i=e("gl-vec3/subtract"),o=e("gl-vec3/normalize"),s=e("gl-vec3/copy"),a=e("gl-vec3/dot"),c=e("gl-vec3/scale"),u=[0,0,0],l=1e-9;t.exports=function(e,t,n,f){i(u,f,n),o(u,u);var p=0===u[0]&&0===u[1]&&0===u[2];if(!p){var v=a(u,t);Math.abs(v-1)<l?c(t,e,-1):Math.abs(v+1)<l&&s(t,e),s(e,u),r(u,e,t),o(u,u),r(t,u,e),o(t,t)}}},{"gl-vec3/copy":23,"gl-vec3/cross":24,"gl-vec3/dot":25,"gl-vec3/normalize":27,"gl-vec3/scale":28,"gl-vec3/subtract":32}],43:[function(e,t,n){var r=e("./camera-base"),i=e("object-assign"),o=e("defined"),s=e("gl-mat4/perspective"),a=e("gl-mat4/lookAt"),c=e("gl-vec3/add");t.exports=function(e){function t(){var e=n.viewport[2]/n.viewport[3];return s(n.projection,n.fov,e,Math.abs(n.near),Math.abs(n.far)),c(u,n.position,n.direction),a(n.view,n.position,u,n.up),l(),n}e=e||{};var n=r(e);n.fov=o(e.fov,Math.PI/4),n.near=o(e.near,1),n.far=o(e.far,100);var u=[0,0,0],l=n.update;return t(),i(n,{update:t})}},{"./camera-base":41,defined:17,"gl-mat4/lookAt":52,"gl-mat4/perspective":54,"gl-vec3/add":22,"object-assign":55}],44:[function(e,t,n){function r(e,t,n,r,c){o(e,n[0],n[1],0),o(t,n[0],n[1],1),i(e,e,r,c),i(t,t,r,c),s(t,t,e),a(t,t)}var i=e("camera-unproject"),o=e("gl-vec3/set"),s=e("gl-vec3/subtract"),a=e("gl-vec3/normalize");t.exports=r},{"camera-unproject":48,"gl-vec3/normalize":27,"gl-vec3/set":30,"gl-vec3/subtract":32}],45:[function(e,t,n){function r(e,t,n,r){var u=n[0],l=n[1],f=n[2],p=n[3],v=s,h=a;o(c,t[0],t[1],t[2],1),i(c,c,r);var d=c[3];return 0!==d&&(c[0]=c[0]/d,c[1]=c[1]/d,c[2]=c[2]/d),e[0]=u+f/2*c[0]+(0+f/2),e[1]=l+p/2*c[1]+(0+p/2),e[2]=(h-v)/2*c[2]+(h+v)/2,e[3]=0===d?0:1/d,e}var i=e("gl-vec4/transformMat4"),o=e("gl-vec4/set"),s=0,a=1,c=[0,0,0,0];t.exports=r},{"gl-vec4/set":46,"gl-vec4/transformMat4":47}],46:[function(e,t,n){function r(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}t.exports=r},{}],47:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,e}t.exports=r},{}],48:[function(e,t,n){function r(e,t,n,r){var o=n[0],s=n[1],a=n[2],c=n[3],u=t[0],l=t[1],f=t[2];return u-=o,l=c-l-1,l-=s,e[0]=2*u/a-1,e[1]=2*l/c-1,e[2]=2*f-1,i(e,e,r)}var i=e("./lib/projectMat4");t.exports=r},{"./lib/projectMat4":49}],49:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],c=n[2],u=n[3],l=n[4],f=n[5],p=n[6],v=n[7],h=n[8],d=n[9],g=n[10],m=n[11],w=n[12],y=n[13],x=n[14],b=n[15],_=1/(r*u+i*v+o*m+b);return e[0]=(r*s+i*l+o*h+w)*_,e[1]=(r*a+i*f+o*d+y)*_,e[2]=(r*c+i*p+o*g+x)*_,e}t.exports=r},{}],50:[function(e,t,n){function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],51:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],c=t[6],u=t[7],l=t[8],f=t[9],p=t[10],v=t[11],h=t[12],d=t[13],g=t[14],m=t[15],w=n*a-r*s,y=n*c-i*s,x=n*u-o*s,b=r*c-i*a,_=r*u-o*a,L=i*u-o*c,M=l*d-f*h,E=l*g-p*h,j=l*m-v*h,T=f*g-p*d,k=f*m-v*d,z=p*m-v*g,q=w*z-y*k+x*T+b*j-_*E+L*M;return q?(q=1/q,e[0]=(a*z-c*k+u*T)*q,e[1]=(i*k-r*z-o*T)*q,e[2]=(d*L-g*_+m*b)*q,e[3]=(p*_-f*L-v*b)*q,e[4]=(c*j-s*z-u*E)*q,e[5]=(n*z-i*j+o*E)*q,e[6]=(g*x-h*L-m*y)*q,e[7]=(l*L-p*x+v*y)*q,e[8]=(s*k-a*j+u*M)*q,e[9]=(r*j-n*k-o*M)*q,e[10]=(h*_-d*x+m*w)*q,e[11]=(f*x-l*_-v*w)*q,e[12]=(a*E-s*T-c*M)*q,e[13]=(n*T-r*E+i*M)*q,e[14]=(d*y-h*b-g*w)*q,e[15]=(l*b-f*y+p*w)*q,e):null}t.exports=r},{}],52:[function(e,t,n){function r(e,t,n,r){var o,s,a,c,u,l,f,p,v,h,d=t[0],g=t[1],m=t[2],w=r[0],y=r[1],x=r[2],b=n[0],_=n[1],L=n[2];return Math.abs(d-b)<1e-6&&Math.abs(g-_)<1e-6&&Math.abs(m-L)<1e-6?i(e):(f=d-b,p=g-_,v=m-L,h=1/Math.sqrt(f*f+p*p+v*v),f*=h,p*=h,v*=h,o=y*v-x*p,s=x*f-w*v,a=w*p-y*f,h=Math.sqrt(o*o+s*s+a*a),h?(h=1/h,o*=h,s*=h,a*=h):(o=0,s=0,a=0),c=p*a-v*s,u=v*o-f*a,l=f*s-p*o,h=Math.sqrt(c*c+u*u+l*l),h?(h=1/h,c*=h,u*=h,l*=h):(c=0,u=0,l=0),e[0]=o,e[1]=c,e[2]=f,e[3]=0,e[4]=s,e[5]=u,e[6]=p,e[7]=0,e[8]=a,e[9]=l,e[10]=v,e[11]=0,e[12]=-(o*d+s*g+a*m),e[13]=-(c*d+u*g+l*m),e[14]=-(f*d+p*g+v*m),e[15]=1,e)}var i=e("./identity");t.exports=r},{"./identity":50}],53:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],f=t[8],p=t[9],v=t[10],h=t[11],d=t[12],g=t[13],m=t[14],w=t[15],y=n[0],x=n[1],b=n[2],_=n[3];return e[0]=y*r+x*a+b*f+_*d,e[1]=y*i+x*c+b*p+_*g,e[2]=y*o+x*u+b*v+_*m,e[3]=y*s+x*l+b*h+_*w,y=n[4],x=n[5],b=n[6],_=n[7],e[4]=y*r+x*a+b*f+_*d,e[5]=y*i+x*c+b*p+_*g,e[6]=y*o+x*u+b*v+_*m,e[7]=y*s+x*l+b*h+_*w,y=n[8],x=n[9],b=n[10],_=n[11],e[8]=y*r+x*a+b*f+_*d,e[9]=y*i+x*c+b*p+_*g,e[10]=y*o+x*u+b*v+_*m,e[11]=y*s+x*l+b*h+_*w,y=n[12],x=n[13],b=n[14],_=n[15],e[12]=y*r+x*a+b*f+_*d,e[13]=y*i+x*c+b*p+_*g,e[14]=y*o+x*u+b*v+_*m,e[15]=y*s+x*l+b*h+_*w,e}t.exports=r},{}],54:[function(e,t,n){function r(e,t,n,r,i){var o=1/Math.tan(t/2),s=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*s,e[15]=0,e}t.exports=r},{}],55:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e,t){for(var n,i,o=r(e),s=1;s<arguments.length;s++){n=arguments[s],i=Object.keys(Object(n));for(var a=0;a<i.length;a++)o[i[a]]=n[i[a]]}return o}},{}],56:[function(e,t,n){function r(e,t){this.origin=e||[0,0,0],this.direction=t||[0,0,-1]}var i=e("ray-triangle-intersection"),o=e("ray-plane-intersection"),s=e("ray-sphere-intersection"),a=e("gl-vec3/copy"),c=[[0,0,0],[0,0,0],[0,0,0]],u=[0,0,0];t.exports=r,r.prototype.set=function(e,t){this.origin=e,this.direction=t},r.prototype.copy=function(e){a(this.origin,e.origin),a(this.direction,e.direction)},r.prototype.clone=function(){var e=new r;return e.copy(this),e},r.prototype.intersectsSphere=function(e,t){return s(u,this.origin,this.direction,e,t)},r.prototype.intersectsPlane=function(e,t){return o(u,this.origin,this.direction,e,t)},r.prototype.intersectsTriangle=function(e){return i(u,this.origin,this.direction,e)},r.prototype.intersectsTriangleCell=function(e,t){var n=e[0],r=e[1],i=e[2];return c[0]=t[n],c[1]=t[r],c[2]=t[i],this.intersectsTriangle(c)}},{"gl-vec3/copy":23,"ray-plane-intersection":57,"ray-sphere-intersection":58,"ray-triangle-intersection":59}],57:[function(e,t,n){function r(e,t,n,r,u){var l=i(n,r);if(0!==l){var f=-(i(t,r)+u)/l;return 0>f?null:(s(c,n,f),o(e,t,c))}return i(r,t)+u===0?a(e,t):null}var i=e("gl-vec3/dot"),o=e("gl-vec3/add"),s=e("gl-vec3/scale"),a=e("gl-vec3/copy");t.exports=r;var c=[0,0,0]},{"gl-vec3/add":22,"gl-vec3/copy":23,"gl-vec3/dot":25,"gl-vec3/scale":28}],58:[function(e,t,n){function r(e,t,n,r,f){s(l,r,t);var p=o(n,l);if(0>p)return null;a(l,t,n,p);var v=i(r,l),h=f*f;return v>h?null:(c(e,n,p-Math.sqrt(h-v)),u(e,e,t))}var i=e("gl-vec3/squaredDistance"),o=e("gl-vec3/dot"),s=e("gl-vec3/subtract"),a=e("gl-vec3/scaleAndAdd"),c=e("gl-vec3/scale"),u=e("gl-vec3/add"),l=[0,0,0];t.exports=r},{"gl-vec3/add":22,"gl-vec3/dot":25,"gl-vec3/scale":28,"gl-vec3/scaleAndAdd":29,"gl-vec3/squaredDistance":31,"gl-vec3/subtract":32}],59:[function(e,t,n){function r(e,t,n,r){s(c,r[1],r[0]),s(u,r[2],r[0]),i(f,n,u);var v=o(c,f);if(a>v)return null;s(l,t,r[0]);var h=o(l,f);if(0>h||h>v)return null;i(p,l,c);var d=o(n,p);if(0>d||h+d>v)return null;var g=o(u,p)/v;return e[0]=t[0]+g*n[0],e[1]=t[1]+g*n[1],e[2]=t[2]+g*n[2],e}var i=e("gl-vec3/cross"),o=e("gl-vec3/dot"),s=e("gl-vec3/subtract"),a=1e-6,c=[0,0,0],u=[0,0,0],l=[0,0,0],f=[0,0,0],p=[0,0,0];t.exports=r},{"gl-vec3/cross":24,"gl-vec3/dot":25,"gl-vec3/subtract":32}],60:[function(e,t,n){function r(e,t,n){var r=i(t,n)+1;return u>r?(r=0,Math.abs(t[0])>Math.abs(t[2])?o(c,-t[1],t[0],0):o(c,0,-t[2],t[1])):a(c,t,n),e[0]=c[0],e[1]=c[1],e[2]=c[2],e[3]=r,s(e,e),e}var i=e("gl-vec3/dot"),o=e("gl-vec3/set"),s=e("gl-quat/normalize"),a=e("gl-vec3/cross"),c=[0,0,0],u=1e-6;t.exports=r},{"gl-quat/normalize":21,"gl-vec3/cross":24,"gl-vec3/dot":25,"gl-vec3/set":30}],61:[function(e,t,n){function r(e){function t(e){for(var t=e.identifier,n=0;n<h.length;n++)if(h[n]&&h[n].touch&&h[n].touch.identifier===t)return n;return-1}function n(){w||(w=!0,e.addEventListener("touchstart",u,!1),e.addEventListener("touchmove",l,!1),e.addEventListener("touchend",f,!1),e.addEventListener("touchcancel",f,!1))}function r(){w&&(w=!1,e.removeEventListener("touchstart",u,!1),e.removeEventListener("touchmove",l,!1),e.removeEventListener("touchend",f,!1),e.removeEventListener("touchcancel",f,!1))}function u(n){for(var r=0;r<n.changedTouches.length;r++){var o=n.changedTouches[r],s=o.identifier,a=t(s);if(-1===a&&2>d){var u=0===d,l=h[0]?1:0,f=h[0]?0:1,w=new i;h[l]=w,d++,w.touch=o,c(o,e,w.position);var y=h[f]?h[f].touch:void 0;if(v.emit("place",o,y),!u){var x=p();m=!1,v.emit("start",x),g=x}}}}function l(n){for(var r=!1,i=0;i<n.changedTouches.length;i++){var o=n.changedTouches[i],s=t(o);-1!==s&&(r=!0,h[s].touch=o,c(o,e,h[s].position))}if(2===d&&r){var a=p();v.emit("change",a,g),g=a}}function f(e){for(var n=0;n<e.changedTouches.length;n++){var r=e.changedTouches[n],i=t(r);if(-1!==i){h[i]=null,d--;var o=0===i?1:0,s=h[o]?h[o].touch:void 0;v.emit("lift",r,s)}}m||2===d||(m=!0,v.emit("end"))}function p(){return 2>d?0:o(h[0].position,h[1].position)}e=e||window;var v=new s,h=[null,null],d=0,g=0,m=!1,w=!1;return Object.defineProperties(v,{pinching:a(function(){return 2===d}),fingers:a(function(){return h})}),n(),v.enable=n,v.disable=r,v.indexOfTouch=t,v}function i(){this.position=[0,0],this.touch=null}var o=e("gl-vec2/distance"),s=e("events").EventEmitter,a=e("dprop"),c=e("mouse-event-offset");t.exports=r},{dprop:62,events:6,"gl-vec2/distance":63,"mouse-event-offset":36}],62:[function(e,t,n){function r(e,t){return{configurable:!0,enumerable:!0,get:e,set:t}}t.exports=r},{}],63:[function(e,t,n){function r(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}t.exports=r},{}]},{},[1]);
