!function e(t,n,r){function i(s,c){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){function r(e,t,n){var r=n.positions.map(function(e){var n=t.project(e);return n[1]=p.shape[1]-n[1],n}),i=Math.floor(n.cells.length/2);e.lineCap="round",e.lineJoin="round",e.lineWidth=1.5,e.beginPath(),e.strokeStyle=c[0],o(e,r,n.cells,0,i),e.stroke(),e.beginPath(),e.strokeStyle=c[1],o(e,r,n.cells,i),e.stroke()}function i(){a.addEventListener("touchstart",function(e){e.preventDefault()})}var o=e("draw-triangles-2d"),s=e("canvas-loop"),c=["hsl(80, 50%, 50%)","hsl(180, 50%, 50%)"],a=document.querySelector(".canvas"),u=e("2d-context")({alpha:!1,canvas:a}),l=e("primitive-torus")({minorSegments:5,majorSegments:6}),f=e("perspective-camera")({fov:50*Math.PI/180,position:[0,2,0],near:1e-5,far:100}),v=e("../")({element:a,thetaBounds:[-1.5,1.5],distanceBounds:[2,100],distance:6,rotationSpeed:1,pinchSpeed:.025});i();var p=s(a,{scale:window.devicePixelRatio}).start();p.on("tick",function(){var e=p.shape[0],t=p.shape[1];v.update(f.position,f.direction,f.up);var n=[0,0,e,t];f.viewport=n,f.update(),u.save(),u.scale(p.scale,p.scale),u.fillStyle="#1B1B23",u.fillRect(0,0,e,t),r(u,f,l),u.restore()})},{"../":2,"2d-context":4,"canvas-loop":8,"draw-triangles-2d":18,"perspective-camera":38,"primitive-torus":58}],2:[function(e,t,n){function r(e){function t(e,t){var n=2*Math.PI;h[0]-=n*e*w.rotateSpeed,h[1]-=n*t*w.rotateSpeed}function n(e){h[2]+=e*w.zoomSpeed}function r(e){h[2]-=e*w.pinchSpeed}function p(e,t,n){var r=n||f;a(g,r,f),u(m,g);var o=w.distance;l.subtract(d,e,w.target),l.transformQuat(d,d,g);var c=Math.atan2(d[0],d[2]),p=Math.atan2(Math.sqrt(d[0]*d[0]+d[2]*d[2]),d[1]);c+=h[0],p+=h[1],c=s(c,w.thetaBounds[0],w.thetaBounds[1]),p=s(p,w.phiBounds[0],w.phiBounds[1]),p=s(p,v,Math.PI-v),o+=h[2],o=s(o,w.distanceBounds[0],w.distanceBounds[1]);var y=Math.abs(o)<=v?v:o;d[0]=y*Math.sin(p)*Math.sin(c),d[1]=y*Math.cos(p),d[2]=y*Math.sin(p)*Math.cos(c),w.phi=p,w.theta=c,w.distance=o,l.transformQuat(d,d,m),l.add(e,w.target,d),i(t,r,e,w.target);for(var x="number"==typeof w.damping?w.damping:1,b=0;b<h.length;b++)h[b]*=1-x}e=e||{};var h=[0,0,0],d=[0,0,0],g=[0,0,0,1],m=g.slice(),w={update:p,target:e.target||[0,0,0],phi:e.phi||0,theta:e.theta||0,distance:o(e.distance,1),damping:o(e.damping,.25),rotateSpeed:o(e.rotateSpeed,.5),zoomSpeed:o(e.zoomSpeed,.01),pinchSpeed:o(e.pinchSpeed,.01),pinch:e.pinching!==!1,zoom:e.zoom!==!1,rotate:e.rotate!==!1,phiBounds:e.phiBounds||[0,Math.PI],thetaBounds:e.thetaBounds||[-(1/0),1/0],distanceBounds:e.distanceBounds||[1,1/0]};return c({parent:e.parent||window,element:e.element,rotate:e.rotate!==!1?t:null,zoom:e.zoom!==!1?n:null,pinch:e.pinch!==!1?r:null}),w}function i(e,t,n,r){l.copy(e,r),l.subtract(e,e,n),l.normalize(e,e)}var o=(e("touch-pinch"),e("touches"),e("defined")),s=e("clamp"),c=e("./lib/input"),a=e("quat-from-unit-vec3"),u=e("gl-quat/invert"),l={length:e("gl-vec3/length"),add:e("gl-vec3/add"),subtract:e("gl-vec3/subtract"),transformQuat:e("gl-vec3/transformQuat"),copy:e("gl-vec3/copy"),normalize:e("gl-vec3/normalize"),cross:e("gl-vec3/cross")},f=[0,1,0],v=1e-4;t.exports=r},{"./lib/input":3,clamp:16,defined:17,"gl-quat/invert":19,"gl-vec3/add":22,"gl-vec3/copy":23,"gl-vec3/cross":24,"gl-vec3/length":26,"gl-vec3/normalize":27,"gl-vec3/subtract":32,"gl-vec3/transformQuat":33,"quat-from-unit-vec3":59,"touch-pinch":62,touches:60}],3:[function(e,t,n){function r(e){function t(e){e.preventDefault()}function n(){h.addEventListener("touchmove",function(e){if(g&&!v.pinching)for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],r=v.identifiers.indexOf(n.identifier);if(-1!==r){u(n);break}}}),v.on("place",function(){g=!v.pinching,g&&c(v.touches[0])}),v.on("lift",function(e,t){g=!v.pinching,g&&t&&o(t,p,d)})}function r(){var e=0;v.on("start",function(t){e=t}),v.on("move",function(t){b(t-e),e=t})}function c(e){o(e,p,d),l(d)&&(g=!0)}function a(){g=!1}function u(e){var t=o(e,p,m);if(v&&v.pinching)return void(d=t);if(g){var n=f(w),r=(t[0]-d[0])/n[0],i=(t[1]-d[1])/n[1];x(r,i),d[0]=t[0],d[1]=t[1]}}function l(e){if(p===window||p===document||p===document.body)return!0;var t=p.getBoundingClientRect();return e[0]>=0&&e[1]>=0&&e[0]<t.width&&e[1]<t.height}function f(e){var t=p;return(t===window||t===document||t===document.body)&&(t=document.documentElement),e[0]=t.clientWidth,e[1]=t.clientHeight,e}var v,p=e.element||window,h=e.parent||p,d=[0,0],g=!1,m=[0,0],w=[0,0],y=e.zoom,x=e.rotate,b=e.pinch;y&&i(p,function(e,t){y(t)},!0),x&&(h.addEventListener("mousedown",c),h.addEventListener("mousemove",u),h.addEventListener("mouseup",a)),(x||b)&&(v=s(h,p),h.addEventListener("touchstart",t),x&&n(),b&&r())}var i=e("mouse-wheel"),o=e("mouse-event-offset"),s=e("touch-pinch");t.exports=r},{"mouse-event-offset":34,"mouse-wheel":37,"touch-pinch":62}],4:[function(e,t,n){var r=e("get-canvas-context");t.exports=function(e){return r("2d",e)}},{"get-canvas-context":5}],5:[function(e,t,n){function r(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if("undefined"==typeof document)return null;t=t||{};var n=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(n.width=t.width),"number"==typeof t.height&&(n.height=t.height);var r,i=t;try{var o=[e];0===e.indexOf("webgl")&&o.push("experimental-"+e);for(var s=0;s<o.length;s++)if(r=n.getContext(o[s],i))return r}catch(c){r=null}return r||null}t.exports=r},{}],6:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,a,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],c(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),a=1;r>a;a++)o[a-1]=arguments[a];n.apply(this,o)}else if(s(n)){for(r=arguments.length,o=new Array(r-1),a=1;r>a;a++)o[a-1]=arguments[a];for(u=n.slice(),r=u.length,a=0;r>a;a++)u[a].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var n;n=c(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,c;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(c=o;c-->0;)if(n[c]===t||n[c].listener&&n[c].listener===t){r=c;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],7:[function(e,t,n){function r(){l=!1,c.length?u=c.concat(u):f=-1,u.length&&i()}function i(){if(!l){var e=setTimeout(r);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var c,a=t.exports={},u=[],l=!1,f=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new o(e,t)),1!==u.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],8:[function(e,t,n){function r(){var e=document.documentElement;return[e.clientWidth,e.clientHeight]}var i=e("canvas-fit"),o=e("raf-loop");t.exports=function(e,t){function n(){c();var t=e.width,n=e.height;u[0]=t/c.scale,u[1]=n/c.scale}if(!e)throw new TypeError("must specify a canvas element");t=t||{};var s=t.parent||r,c=i(e,s,t.scale),a=o(),u=[0,0];return n(),window.addEventListener("resize",function(){n(),a.emit("resize")},!1),Object.defineProperties(a,{scale:{get:function(){return c.scale},set:function(e){c.scale=e}},shape:{get:function(){return u}},parent:{get:function(){return c.parent},set:function(e){c.parent=e}}}),a}},{"canvas-fit":9,"raf-loop":11}],9:[function(e,t,n){function r(e,t,n){function r(){var t=r.parent||e.parentNode;if("function"==typeof t)var n=t(o)||o,c=n[0],a=n[1];else if(t&&t!==document.body)var u=i(t),c=0|u[0],a=0|u[1];else var c=window.innerWidth,a=window.innerHeight;return s?(e.setAttribute("width",c*r.scale+"px"),e.setAttribute("height",a*r.scale+"px")):(e.width=c*r.scale,e.height=a*r.scale),e.style.width=c+"px",e.style.height=a+"px",r}var s="SVG"===e.nodeName.toUpperCase();return e.style.position=e.style.position||"absolute",e.style.top=0,e.style.left=0,r.scale=parseFloat(n||1),r.parent=t,r()}var i=e("element-size");t.exports=r;var o=new Float32Array(2)},{"element-size":10}],10:[function(e,t,n){function r(e){if(e===window||e===document.body)return[window.innerWidth,window.innerHeight];if(!e.parentNode){var t=!0;document.body.appendChild(e)}var n=e.getBoundingClientRect(),r=getComputedStyle(e),o=(0|n.height)+i(r.getPropertyValue("margin-top"))+i(r.getPropertyValue("margin-bottom")),s=(0|n.width)+i(r.getPropertyValue("margin-left"))+i(r.getPropertyValue("margin-right"));return t&&document.body.removeChild(e),[s,o]}function i(e){return parseFloat(e)||0}t.exports=r},{}],11:[function(e,t,n){function r(e){return this instanceof r?(this.running=!1,this.last=s(),this._frame=0,this._tick=this.tick.bind(this),void(e&&this.on("tick",e))):new r(e)}var i=e("inherits"),o=e("events").EventEmitter,s=e("right-now"),c=e("raf");t.exports=r,i(r,o),r.prototype.start=function(){return this.running?void 0:(this.running=!0,this.last=s(),this._frame=c(this._tick),this)},r.prototype.stop=function(){return this.running=!1,0!==this._frame&&c.cancel(this._frame),this._frame=0,this},r.prototype.tick=function(){this._frame=c(this._tick);var e=s(),t=e-this.last;this.emit("tick",t),this.last=e}},{events:6,inherits:12,raf:13,"right-now":15}],12:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],13:[function(e,t,n){for(var r=e("performance-now"),i="undefined"==typeof window?{}:window,o=["moz","webkit"],s="AnimationFrame",c=i["request"+s],a=i["cancel"+s]||i["cancelRequest"+s],u=0;u<o.length&&!c;u++)c=i[o[u]+"Request"+s],a=i[o[u]+"Cancel"+s]||i[o[u]+"CancelRequest"+s];if(!c||!a){var l=0,f=0,v=[],p=1e3/60;c=function(e){if(0===v.length){var t=r(),n=Math.max(0,p-(t-l));l=n+t,setTimeout(function(){var e=v.slice(0);v.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return v.push({handle:++f,callback:e,cancelled:!1}),f},a=function(e){for(var t=0;t<v.length;t++)v[t].handle===e&&(v[t].cancelled=!0)}}t.exports=function(e){return c.call(i,e)},t.exports.cancel=function(){a.apply(i,arguments)}},{"performance-now":14}],14:[function(e,t,n){(function(e){(function(){var n,r,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-i)/1e6},r=e.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},i=n()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:7}],15:[function(e,t,n){(function(e){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,n){function r(e,t,n){return n>t?t>e?t:e>n?n:e:n>e?n:e>t?t:e}t.exports=r},{}],17:[function(e,t,n){t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],18:[function(e,t,n){t.exports=function(e,t,n,r,i){var o=t;for(r=0|r,i="number"==typeof i?0|i:n.length;i>r&&r<n.length;r++){var s=n[r],c=o[s[0]],a=o[s[1]],u=o[s[2]];e.moveTo(c[0],c[1]),e.lineTo(a[0],a[1]),e.lineTo(u[0],u[1]),e.lineTo(c[0],c[1])}}},{}],19:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o,c=s?1/s:0;return e[0]=-n*c,e[1]=-r*c,e[2]=-i*c,e[3]=o*c,e}t.exports=r},{}],20:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s),e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=o*s),e}t.exports=r},{}],21:[function(e,t,n){t.exports=e("gl-vec4/normalize")},{"gl-vec4/normalize":20}],22:[function(e,t,n){function r(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}t.exports=r},{}],23:[function(e,t,n){function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}t.exports=r},{}],24:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],c=n[1],a=n[2];return e[0]=i*a-o*c,e[1]=o*s-r*a,e[2]=r*c-i*s,e}t.exports=r},{}],25:[function(e,t,n){function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=r},{}],26:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}t.exports=r},{}],27:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}t.exports=r},{}],28:[function(e,t,n){function r(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}t.exports=r},{}],29:[function(e,t,n){function r(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}t.exports=r},{}],30:[function(e,t,n){function r(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}t.exports=r},{}],31:[function(e,t,n){function r(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}t.exports=r},{}],32:[function(e,t,n){function r(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}t.exports=r},{}],33:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],c=n[1],a=n[2],u=n[3],l=u*r+c*o-a*i,f=u*i+a*r-s*o,v=u*o+s*i-c*r,p=-s*r-c*i-a*o;return e[0]=l*u+p*-s+f*-a-v*-c,e[1]=f*u+p*-c+v*-s-l*-a,e[2]=v*u+p*-a+l*-c-f*-s,e}t.exports=r},{}],34:[function(e,t,n){function r(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,o=e.clientY||0,s=i(t);return n[0]=r-s.left,n[1]=o-s.top,n}function i(e){return e===window||e===document||e===document.body?o:e.getBoundingClientRect()}var o={left:0,top:0};t.exports=r},{}],35:[function(e,t,n){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],36:[function(e,t,n){"use strict";function r(e,t){var n=s(getComputedStyle(e).getPropertyValue(t));return n[0]*o(n[1],e)}function i(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var i=r(n,"font-size")/128;return t.removeChild(n),i}function o(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),(t===window||t===document)&&(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return i(e,t);case"em":return r(t,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return c;case"cm":return c/2.54;case"mm":return c/25.4;case"pt":return c/72;case"pc":return c/6}return 1}var s=e("parse-unit");t.exports=o;var c=96},{"parse-unit":35}],37:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var r=i("ex",e);e.addEventListener("wheel",function(e){n&&e.preventDefault();var i=e.deltaX||0,o=e.deltaY||0,s=e.deltaZ||0,c=e.deltaMode,a=1;switch(c){case 1:a=r;break;case 2:a=window.innerHeight}return i*=a,o*=a,s*=a,i||o||s?t(i,o,s):void 0})}var i=e("to-px");t.exports=r},{"to-px":36}],38:[function(e,t,n){t.exports=e("./lib/camera-perspective")},{"./lib/camera-perspective":41}],39:[function(e,t,n){var r=e("object-assign"),i=e("ray-3d"),o=e("camera-project"),s=e("camera-unproject"),c=e("./camera-look-at"),a=e("camera-picking-ray"),u=e("gl-vec3/add"),l=e("gl-mat4/multiply"),f=e("gl-mat4/invert"),v=e("gl-mat4/identity"),p=e("gl-vec3/set");t.exports=function(e){function t(){l(y.projView,y.projection,y.view);var e=f(y.invProjView,y.projView);if(!e)throw new Error("camera projection * view is non-invertible")}function n(e){return c(y.direction,y.up,y.position,e),y}function h(){return p(y.position,0,0,0),p(y.direction,0,0,-1),p(y.up,0,1,0),v(y.view),v(y.projection),v(y.projView),v(y.invProjView),y}function d(e){return u(y.position,y.position,e),y}function g(e){var t=new i;return a(t.origin,t.direction,e,y.viewport,y.invProjView),t}function m(e){return o([],e,y.viewport,y.projView)}function w(e){return s([],e,y.viewport,y.invProjView)}e=e||{};var y={projection:v([]),view:v([]),position:e.position||[0,0,0],direction:e.direction||[0,0,-1],up:e.up||[0,1,0],viewport:e.viewport||[-1,-1,1,1],projView:v([]),invProjView:v([])};return r(y,{translate:d,identity:h,lookAt:n,createPickingRay:g,update:t,project:m,unproject:w})}},{"./camera-look-at":40,"camera-picking-ray":42,"camera-project":43,"camera-unproject":46,"gl-mat4/identity":48,"gl-mat4/invert":49,"gl-mat4/multiply":51,"gl-vec3/add":22,"gl-vec3/set":30,"object-assign":53,"ray-3d":54}],40:[function(e,t,n){var r=e("gl-vec3/cross"),i=e("gl-vec3/subtract"),o=e("gl-vec3/normalize"),s=e("gl-vec3/copy"),c=e("gl-vec3/dot"),a=e("gl-vec3/scale"),u=[0,0,0],l=1e-9;t.exports=function(e,t,n,f){i(u,f,n),o(u,u);var v=0===u[0]&&0===u[1]&&0===u[2];if(!v){var p=c(u,t);Math.abs(p-1)<l?a(t,e,-1):Math.abs(p+1)<l&&s(t,e),s(e,u),r(u,e,t),o(u,u),r(t,u,e),o(t,t)}}},{"gl-vec3/copy":23,"gl-vec3/cross":24,"gl-vec3/dot":25,"gl-vec3/normalize":27,"gl-vec3/scale":28,"gl-vec3/subtract":32}],41:[function(e,t,n){var r=e("./camera-base"),i=e("object-assign"),o=e("defined"),s=e("gl-mat4/perspective"),c=e("gl-mat4/lookAt"),a=e("gl-vec3/add");t.exports=function(e){function t(){var e=n.viewport[2]/n.viewport[3];return s(n.projection,n.fov,e,Math.abs(n.near),Math.abs(n.far)),a(u,n.position,n.direction),c(n.view,n.position,u,n.up),l(),n}e=e||{};var n=r(e);n.fov=o(e.fov,Math.PI/4),n.near=o(e.near,1),n.far=o(e.far,100);var u=[0,0,0],l=n.update;return t(),i(n,{update:t})}},{"./camera-base":39,defined:17,"gl-mat4/lookAt":50,"gl-mat4/perspective":52,"gl-vec3/add":22,"object-assign":53}],42:[function(e,t,n){function r(e,t,n,r,a){o(e,n[0],n[1],0),o(t,n[0],n[1],1),i(e,e,r,a),i(t,t,r,a),s(t,t,e),c(t,t)}var i=e("camera-unproject"),o=e("gl-vec3/set"),s=e("gl-vec3/subtract"),c=e("gl-vec3/normalize");t.exports=r},{"camera-unproject":46,"gl-vec3/normalize":27,"gl-vec3/set":30,"gl-vec3/subtract":32}],43:[function(e,t,n){function r(e,t,n,r){var u=n[0],l=n[1],f=n[2],v=n[3],p=s,h=c;o(a,t[0],t[1],t[2],1),i(a,a,r);var d=a[3];return 0!==d&&(a[0]=a[0]/d,a[1]=a[1]/d,a[2]=a[2]/d),e[0]=u+f/2*a[0]+(0+f/2),e[1]=l+v/2*a[1]+(0+v/2),e[2]=(h-p)/2*a[2]+(h+p)/2,e[3]=0===d?0:1/d,e}var i=e("gl-vec4/transformMat4"),o=e("gl-vec4/set"),s=0,c=1,a=[0,0,0,0];t.exports=r},{"gl-vec4/set":44,"gl-vec4/transformMat4":45}],44:[function(e,t,n){function r(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}t.exports=r},{}],45:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,e}t.exports=r},{}],46:[function(e,t,n){function r(e,t,n,r){var o=n[0],s=n[1],c=n[2],a=n[3],u=t[0],l=t[1],f=t[2];return u-=o,l=a-l-1,l-=s,e[0]=2*u/c-1,e[1]=2*l/a-1,e[2]=2*f-1,i(e,e,r)}var i=e("./lib/projectMat4");t.exports=r},{"./lib/projectMat4":47}],47:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],c=n[1],a=n[2],u=n[3],l=n[4],f=n[5],v=n[6],p=n[7],h=n[8],d=n[9],g=n[10],m=n[11],w=n[12],y=n[13],x=n[14],b=n[15],_=1/(r*u+i*p+o*m+b);return e[0]=(r*s+i*l+o*h+w)*_,e[1]=(r*c+i*f+o*d+y)*_,e[2]=(r*a+i*v+o*g+x)*_,e}t.exports=r},{}],48:[function(e,t,n){function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],49:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],c=t[5],a=t[6],u=t[7],l=t[8],f=t[9],v=t[10],p=t[11],h=t[12],d=t[13],g=t[14],m=t[15],w=n*c-r*s,y=n*a-i*s,x=n*u-o*s,b=r*a-i*c,_=r*u-o*c,M=i*u-o*a,L=l*d-f*h,E=l*g-v*h,j=l*m-p*h,T=f*g-v*d,k=f*m-p*d,z=v*m-p*g,q=w*z-y*k+x*T+b*j-_*E+M*L;return q?(q=1/q,e[0]=(c*z-a*k+u*T)*q,e[1]=(i*k-r*z-o*T)*q,e[2]=(d*M-g*_+m*b)*q,e[3]=(v*_-f*M-p*b)*q,e[4]=(a*j-s*z-u*E)*q,e[5]=(n*z-i*j+o*E)*q,e[6]=(g*x-h*M-m*y)*q,e[7]=(l*M-v*x+p*y)*q,e[8]=(s*k-c*j+u*L)*q,e[9]=(r*j-n*k-o*L)*q,e[10]=(h*_-d*x+m*w)*q,e[11]=(f*x-l*_-p*w)*q,e[12]=(c*E-s*T-a*L)*q,e[13]=(n*T-r*E+i*L)*q,e[14]=(d*y-h*b-g*w)*q,e[15]=(l*b-f*y+v*w)*q,e):null}t.exports=r},{}],50:[function(e,t,n){function r(e,t,n,r){var o,s,c,a,u,l,f,v,p,h,d=t[0],g=t[1],m=t[2],w=r[0],y=r[1],x=r[2],b=n[0],_=n[1],M=n[2];return Math.abs(d-b)<1e-6&&Math.abs(g-_)<1e-6&&Math.abs(m-M)<1e-6?i(e):(f=d-b,v=g-_,p=m-M,h=1/Math.sqrt(f*f+v*v+p*p),f*=h,v*=h,p*=h,o=y*p-x*v,s=x*f-w*p,c=w*v-y*f,h=Math.sqrt(o*o+s*s+c*c),h?(h=1/h,o*=h,s*=h,c*=h):(o=0,s=0,c=0),a=v*c-p*s,u=p*o-f*c,l=f*s-v*o,h=Math.sqrt(a*a+u*u+l*l),h?(h=1/h,a*=h,u*=h,l*=h):(a=0,u=0,l=0),e[0]=o,e[1]=a,e[2]=f,e[3]=0,e[4]=s,e[5]=u,e[6]=v,e[7]=0,e[8]=c,e[9]=l,e[10]=p,e[11]=0,e[12]=-(o*d+s*g+c*m),e[13]=-(a*d+u*g+l*m),e[14]=-(f*d+v*g+p*m),e[15]=1,e)}var i=e("./identity");t.exports=r},{"./identity":48}],51:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],c=t[4],a=t[5],u=t[6],l=t[7],f=t[8],v=t[9],p=t[10],h=t[11],d=t[12],g=t[13],m=t[14],w=t[15],y=n[0],x=n[1],b=n[2],_=n[3];return e[0]=y*r+x*c+b*f+_*d,e[1]=y*i+x*a+b*v+_*g,e[2]=y*o+x*u+b*p+_*m,e[3]=y*s+x*l+b*h+_*w,y=n[4],x=n[5],b=n[6],_=n[7],e[4]=y*r+x*c+b*f+_*d,e[5]=y*i+x*a+b*v+_*g,e[6]=y*o+x*u+b*p+_*m,e[7]=y*s+x*l+b*h+_*w,y=n[8],x=n[9],b=n[10],_=n[11],e[8]=y*r+x*c+b*f+_*d,e[9]=y*i+x*a+b*v+_*g,e[10]=y*o+x*u+b*p+_*m,e[11]=y*s+x*l+b*h+_*w,y=n[12],x=n[13],b=n[14],_=n[15],e[12]=y*r+x*c+b*f+_*d,e[13]=y*i+x*a+b*v+_*g,e[14]=y*o+x*u+b*p+_*m,e[15]=y*s+x*l+b*h+_*w,e}t.exports=r},{}],52:[function(e,t,n){function r(e,t,n,r,i){var o=1/Math.tan(t/2),s=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*s,e[15]=0,e}t.exports=r},{}],53:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e,t){for(var n,i,o=r(e),s=1;s<arguments.length;s++){n=arguments[s],i=Object.keys(Object(n));for(var c=0;c<i.length;c++)o[i[c]]=n[i[c]]}return o}},{}],54:[function(e,t,n){function r(e,t){this.origin=e||[0,0,0],this.direction=t||[0,0,-1]}var i=e("ray-triangle-intersection"),o=e("ray-plane-intersection"),s=e("ray-sphere-intersection"),c=e("gl-vec3/copy"),a=[[0,0,0],[0,0,0],[0,0,0]],u=[0,0,0];t.exports=r,r.prototype.set=function(e,t){this.origin=e,this.direction=t},r.prototype.copy=function(e){c(this.origin,e.origin),c(this.direction,e.direction)},r.prototype.clone=function(){var e=new r;return e.copy(this),e},r.prototype.intersectsSphere=function(e,t){return s(u,this.origin,this.direction,e,t)},r.prototype.intersectsPlane=function(e,t){return o(u,this.origin,this.direction,e,t)},r.prototype.intersectsTriangle=function(e){return i(u,this.origin,this.direction,e)},r.prototype.intersectsTriangleCell=function(e,t){var n=e[0],r=e[1],i=e[2];return a[0]=t[n],a[1]=t[r],a[2]=t[i],this.intersectsTriangle(a)}},{"gl-vec3/copy":23,"ray-plane-intersection":55,"ray-sphere-intersection":56,"ray-triangle-intersection":57}],55:[function(e,t,n){function r(e,t,n,r,u){var l=i(n,r);if(0!==l){var f=-(i(t,r)+u)/l;return 0>f?null:(s(a,n,f),o(e,t,a))}return i(r,t)+u===0?c(e,t):null}var i=e("gl-vec3/dot"),o=e("gl-vec3/add"),s=e("gl-vec3/scale"),c=e("gl-vec3/copy");t.exports=r;var a=[0,0,0]},{"gl-vec3/add":22,"gl-vec3/copy":23,"gl-vec3/dot":25,"gl-vec3/scale":28}],56:[function(e,t,n){function r(e,t,n,r,f){s(l,r,t);var v=o(n,l);if(0>v)return null;c(l,t,n,v);var p=i(r,l),h=f*f;return p>h?null:(a(e,n,v-Math.sqrt(h-p)),u(e,e,t))}var i=e("gl-vec3/squaredDistance"),o=e("gl-vec3/dot"),s=e("gl-vec3/subtract"),c=e("gl-vec3/scaleAndAdd"),a=e("gl-vec3/scale"),u=e("gl-vec3/add"),l=[0,0,0];t.exports=r},{"gl-vec3/add":22,"gl-vec3/dot":25,"gl-vec3/scale":28,"gl-vec3/scaleAndAdd":29,"gl-vec3/squaredDistance":31,"gl-vec3/subtract":32}],57:[function(e,t,n){function r(e,t,n,r){s(a,r[1],r[0]),s(u,r[2],r[0]),i(f,n,u);var p=o(a,f);if(c>p)return null;s(l,t,r[0]);var h=o(l,f);if(0>h||h>p)return null;i(v,l,a);var d=o(n,v);if(0>d||h+d>p)return null;var g=o(u,v)/p;return e[0]=t[0]+g*n[0],e[1]=t[1]+g*n[1],e[2]=t[2]+g*n[2],e}var i=e("gl-vec3/cross"),o=e("gl-vec3/dot"),s=e("gl-vec3/subtract"),c=1e-6,a=[0,0,0],u=[0,0,0],l=[0,0,0],f=[0,0,0],v=[0,0,0];t.exports=r},{"gl-vec3/cross":24,"gl-vec3/dot":25,"gl-vec3/subtract":32}],58:[function(e,t,n){function r(e){e=e||{};for(var t=i(e.majorRadius,1),n=i(e.minorRadius,.25),r=i(e.minorSegments,32),c=i(e.majorSegments,64),a=i(e.arc,2*Math.PI),u=2*Math.PI,l=[0,0,0],f=[],v=[],p=[],h=[0,0,0],d=[],g=0;r>=g;g++)for(var m=0;c>=m;m++){var w=m/c*a,y=g/r*u;l[0]=t*Math.cos(w),l[1]=t*Math.sin(w);var x=[(t+n*Math.cos(y))*Math.cos(w),(t+n*Math.cos(y))*Math.sin(w),n*Math.sin(y)];v.push(x),o(h,x,l),s(h,h),d.push(h.slice()),f.push([m/c,g/r])}for(var g=1;r>=g;g++)for(var m=1;c>=m;m++){var b=(c+1)*g+m-1,_=(c+1)*(g-1)+m-1,M=(c+1)*(g-1)+m,L=(c+1)*g+m;p.push([b,_,L]),p.push([_,M,L])}return{uvs:f,cells:p,normals:d,positions:v}}var i=e("defined"),o=e("gl-vec3/subtract"),s=e("gl-vec3/normalize");t.exports=r},{defined:17,"gl-vec3/normalize":27,"gl-vec3/subtract":32}],59:[function(e,t,n){function r(e,t,n){var r=i(t,n)+1;return u>r?(r=0,Math.abs(t[0])>Math.abs(t[2])?o(a,-t[1],t[0],0):o(a,0,-t[2],t[1])):c(a,t,n),e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=r,s(e,e),e}var i=e("gl-vec3/dot"),o=e("gl-vec3/set"),s=e("gl-quat/normalize"),c=e("gl-vec3/cross"),a=[0,0,0],u=1e-6;t.exports=r},{"gl-quat/normalize":21,"gl-vec3/cross":24,"gl-vec3/dot":25,"gl-vec3/set":30}],60:[function(e,t,n){function r(e,t){var n=e.clientX||0,r=e.clientY||0,i=a(t);return[n-i.left,r-i.top]}function i(e,t){return Array.prototype.slice.call(e).filter(function(e){return e.target===t})[0]||e[0]}function o(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return null}function s(e,t){return function(n){t?e.addEventListener(n.type,n.listener):e.removeEventListener(n.type,n.listener)}}function c(e){return e.replace(/^(touch|mouse)/,"").replace(/up$/,"end").replace(/down$/,"start")}function a(e){return e===window||e===document||e===document.body?f:e.getBoundingClientRect()}var u=e("events/"),l=["touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseup"],f={left:0,top:0};t.exports=function(e,t){function n(e,t){var n;return f&&/^touch(end|cancel)/.test(t)?(n=o(e.changedTouches,f.identifier||0),n&&(f=null)):!f&&/^touchstart/.test(t)?f=n=i(e.changedTouches,a.target):f&&(n=o(e.changedTouches,f.identifier||0)),n}t=t||{},e=e||window;var a=new u;a.target=t.target||e;var f=null,v=t.filtered,p=l;"string"==typeof t.type&&(p=l.filter(function(e){return 0===e.indexOf(t.type)}));var h=p.map(function(e){var o=c(e),s=function(s){var c=s;if(/^touch/.test(e)&&(/^touchend$/.test(e)&&t.preventSimulated!==!1&&s.preventDefault(),c=v?n(s,e):i(s.changedTouches,a.target)),c){var u=r(c,a.target);a.emit(o,s,u)}};return{type:e,listener:s}});return a.enable=function(){return h.forEach(s(e,!0)),a},a.disable=function(){return h.forEach(s(e,!1)),a},a.enable(),a}},{"events/":61}],61:[function(e,t,n){arguments[4][6][0].apply(n,arguments)},{dup:6}],62:[function(e,t,n){function r(e,t){function n(){w||(w=!0,t.addEventListener("touchstart",a,!1),t.addEventListener("touchmove",u,!1),t.addEventListener("touchend",l,!1),t.addEventListener("touchcancel",l,!1))}function r(){w&&(w=!1,t.removeEventListener("touchstart",a,!1),t.removeEventListener("touchmove",u,!1),t.removeEventListener("touchend",l,!1),t.removeEventListener("touchcancel",l,!1))}function a(e){for(var n=0;n<e.changedTouches.length;n++){var r=e.changedTouches[n],o=r.identifier,s=h.indexOf(o);if(-1===s&&h.length<2){var a=h.length,u=v[0];h.push(o),v.push(r),c(r,t,p[a]),0===a?(d=0,g=0):(d=i(p[0],p[1]),g=d,m=!1,f.emit("start",d)),f.emit("place",r,u)}}}function u(e){for(var n=0;n<e.changedTouches.length;n++){var r=e.changedTouches[n],o=r.identifier,s=h.indexOf(o);-1!==s&&c(r,t,p[s])}2===h.length&&(g=i(p[0],p[1]),f.emit("move",g,d))}function l(e){for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],r=h.indexOf(n.identifier);-1!==r&&(v.splice(r,1),h.splice(r,1),f.emit("lift",n,v[0]))}0===h.length&&(g=0,d=0),m||2===h.length||(m=!0,f.emit("end"))}e=e||window,t=t||e;var f=new o,v=[],p=[[0,0],[0,0]],h=[],d=0,g=0,m=!1,w=!1;return Object.defineProperties(f,{pinching:s(function(){return 2===h.length}),positions:s(function(){return p}),identifiers:s(function(){return h}),touches:s(function(){return v})}),n(),f.enable=n,f.disable=r,
f}var i=e("gl-vec2/distance"),o=e("events").EventEmitter,s=e("dprop"),c=e("mouse-event-offset");t.exports=r},{dprop:63,events:6,"gl-vec2/distance":64,"mouse-event-offset":65}],63:[function(e,t,n){function r(e,t){return{configurable:!0,enumerable:!0,get:e,set:t}}t.exports=r},{}],64:[function(e,t,n){function r(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}t.exports=r},{}],65:[function(e,t,n){arguments[4][34][0].apply(n,arguments)},{dup:34}]},{},[1]);
